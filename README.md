# SFC『鮫亀』: さめがめ「ふつう」モードの最大スコアを探索するソルバー

## 動作環境

* BMI2 命令に対応した x64 CPU
* RAM 16GB 以上

Linux でのみ動作確認している。

## 使い方

`solve_many2` バイナリで最大スコアを実現する乱数と手順を求める。
既知の最大スコアは 2229。適当に最大スコアの初期値を与えると枝刈りが捗る。

```sh
cargo run --example=solve_many2 --profile=release-lto -- --best-score-ini 2000 > many.out 2> many.log
```

## 注意

ゲーム内の乱数は NMI カウンタに依存しているが、盤面生成中にも 1 回 NMI が発生し、そのタイミングには微妙に幅がある。
よって、乱数は CPU サイクルに依存する。
おそらく駒を 39 または 40 個配置した時点で NMI が発生すると思われるので、本ソルバーではそのように仮定しているが、このタイミングをさらにずらす方法があるかもしれない。

局面のハッシュ衝突については特に対策していないが、ログを見る限り衝突確率は非常に低いので多分大丈夫、なはず。
